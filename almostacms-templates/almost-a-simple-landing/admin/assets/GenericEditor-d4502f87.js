import{r as t,j as e}from"./index-df029b4f.js";function v({sectionId:y,sectionName:o,dataFile:a,onSave:c}){const[x,u]=t.useState(null),[f,m]=t.useState(!0),[l,n]=t.useState(null),[g,b]=t.useState(""),[s,d]=t.useState("idle");t.useEffect(()=>{i()},[a]);async function i(){try{m(!0);const r=await fetch(`/data/${a}`);if(!r.ok)throw new Error(`Failed to load ${a}`);const h=await r.json();u(h),b(JSON.stringify(h,null,2)),n(null)}catch(r){n(r.message)}finally{m(!1)}}function p(){try{const r=JSON.parse(g);u(r),d("saving"),c&&c(r),setTimeout(()=>{d("saved"),setTimeout(()=>d("idle"),2e3)},500)}catch(r){d("error"),n("Invalid JSON: "+r.message)}}return f?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsxs("span",{className:"ml-3 text-gray-600",children:["Loading ",o,"..."]})]}):l&&!x?e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[e.jsxs("h3",{className:"text-red-800 font-semibold mb-2",children:["Error Loading ",o]}),e.jsx("p",{className:"text-red-600 text-sm",children:l}),e.jsx("button",{onClick:i,className:"mt-4 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Try Again"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-b border-gray-200 pb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:o}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Edit ",a]})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsx("p",{className:"text-yellow-800 text-sm",children:"⚠️ This is a temporary JSON editor. A custom visual editor will be created for this section."})}),l&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("p",{className:"text-red-600 text-sm",children:l})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"JSON Data"}),e.jsx("textarea",{value:g,onChange:r=>b(r.target.value),className:"w-full h-96 px-3 py-2 border border-gray-300 rounded-lg font-mono text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",spellCheck:!1})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:i,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Reset"}),e.jsxs("button",{onClick:p,disabled:s==="saving",className:`px-6 py-2 rounded-lg font-medium ${s==="saved"?"bg-green-600 text-white":s==="error"?"bg-red-600 text-white":"bg-blue-600 text-white hover:bg-blue-700"} ${s==="saving"?"opacity-50 cursor-not-allowed":""}`,children:[s==="saving"&&"Saving...",s==="saved"&&"✓ Saved",s==="error"&&"✗ Error",s==="idle"&&"Save Changes"]})]}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Preview Data"}),e.jsx("pre",{className:"text-xs text-gray-600 overflow-auto max-h-48",children:JSON.stringify(x,null,2)})]})]})}export{v as GenericEditor,v as default};
